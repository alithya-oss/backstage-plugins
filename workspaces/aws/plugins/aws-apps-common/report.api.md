## API Report File for "@alithya-oss/backstage-plugin-aws-apps-common"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
import { BasicPermission } from '@backstage/plugin-permission-common';
import { Entity } from '@backstage/catalog-model';
import { JsonObject } from '@backstage/types';
import { KindValidator } from '@backstage/catalog-model';
import { StackStatus } from '@aws-sdk/client-cloudformation';

// @public (undocumented)
export type AppPromoParams = {
  envName: string;
  envRequiresManualApproval: boolean;
  appName: string;
  providers: AWSProviderParams[];
};

// @public (undocumented)
export type AppState = {
  appID?: string;
  appState?: AppStateType;
  deploymentIdentifier?: string;
  runningCount?: number;
  desiredCount?: number;
  pendingCount?: number;
  lastStateTimestamp?: Date;
  stateObject?: any;
  additionalInfo?: KeyValue[];
};

// @public (undocumented)
export enum AppStateType {
  // (undocumented)
  PROVISIONING = 'Provisioning',
  // (undocumented)
  RUNNING = 'Running',
  // (undocumented)
  STOPPED = 'Stopped',
  // (undocumented)
  UPDATING = 'Updating',
}

// @public (undocumented)
export interface AssociatedResources {
  // (undocumented)
  resourceArn: string;
  // (undocumented)
  resourceName: string;
  // (undocumented)
  resourceType: string;
}

// @public (undocumented)
export interface AuditRecord {
  // (undocumented)
  actionName: string;
  // (undocumented)
  actionType: string;
  // (undocumented)
  appName: string;
  // (undocumented)
  assumedRole: string;
  // (undocumented)
  createdAt: string;
  // (undocumented)
  createdDate: string;
  // (undocumented)
  id: string;
  // (undocumented)
  initiatedBy: string;
  // (undocumented)
  message: string;
  // (undocumented)
  origin: string;
  // (undocumented)
  owner: string;
  // (undocumented)
  prefix: string;
  // (undocumented)
  providerName: string;
  // (undocumented)
  request: string;
  // (undocumented)
  status: string;
  // (undocumented)
  targetAccount: string;
  // (undocumented)
  targetRegion: string;
}

// @public
export type AWSComponent = {
  componentName: string;
  componentType: AWSComponentType;
  componentSubType: string;
  iacType: string;
  componentState: ComponentStateType;
  repoSecretArn: string;
  platformRegion: string;
  environments: AwsDeploymentEnvironments;
  currentEnvironment: GenericAWSEnvironment;
  setCurrentProvider: (envName: string, providerName: string) => void;
  getRepoInfo: () => IRepositoryInfo;
};

// @public (undocumented)
export enum AWSComponentType {
  // (undocumented)
  AWSApp = 'aws-app',
  // (undocumented)
  AWSEnvironment = 'aws-environment',
  // (undocumented)
  AWSOrganization = 'aws-organization',
  // (undocumented)
  AWSProvider = 'aws-provider',
  // (undocumented)
  AWSResource = 'aws-resource',
  // (undocumented)
  Default = 'aws-default',
}

// @public
export type AWSDeploymentEnvironment = {
  providerData: {
    name: string;
    prefix: string;
    description: string;
    accountNumber: string;
    region: string;
    vpcSsmKey: string;
    providerType: string;
    auditTable: string;
    operationRoleSsmKey: string;
    provisioningRoleSsmKey: string;
    cloudFormationStackName: string;
    terraformWorkspace: string;
    terraformStateBucket: string;
    terraformStateTable: string;
  };
  environment: {
    name: string;
    description: string;
    accountType: string;
    regionType: string;
    category: string;
    classification: string;
    envType: string;
    level: number;
  };
  entities: {
    envEntity?: AWSEnvironmentEntityV1;
    envProviderEntity?: AWSEnvironmentProviderEntityV1;
  };
  app: AWSDeploymentEnvironmentComponent;
  resource: {};
};

// @public (undocumented)
export type AWSDeploymentEnvironmentComponent = {
  cloudFormationStackName: string;
  links: {
    title: string;
    url: string;
    icon?: string;
  }[];
};

// @public
export type AwsDeploymentEnvironments = {
  [key: string]: GenericAWSEnvironment;
};

// @public (undocumented)
export type AWSECSAppDeploymentEnvironment = AWSDeploymentEnvironment & {
  clusterName: string;
  app: AWSDeploymentEnvironmentComponent & {
    ecrArn: string;
    serviceArn: string;
    taskDefArn: string;
    taskExecutionRoleArn: string;
    resourceGroupArn: string;
    logGroupName: string;
  };
};

// @public (undocumented)
export type AWSEKSAppDeploymentEnvironment = AWSDeploymentEnvironment & {
  clusterName: string;
  app: AWSDeploymentEnvironmentComponent & {
    appAdminRoleArn: string;
    ecrArn: string;
    namespace: string;
    resourceGroupArn: string;
    logGroupName: string;
  };
};

// @public
export interface AWSEnvironmentEntityV1 extends Entity {
  apiVersion: 'aws.backstage.io/v1alpha';
  kind: 'AWSEnvironment';
  spec: {
    type: string;
    parameters?: JsonObject | JsonObject[];
    system?: string;
    lifecycle: string;
    output?: {
      [name: string]: string;
    };
    owner?: string;
    dependsOn?: string[];
  };
}

// @public
export const awsEnvironmentEntityV1Validator: KindValidator;

// @public
export interface AWSEnvironmentProviderEntityV1 extends Entity {
  apiVersion: 'aws.backstage.io/v1alpha';
  kind: 'AWSEnvironmentProvider';
  spec: {
    type: string;
    parameters?: JsonObject | JsonObject[];
    system?: string;
    lifecycle: string;
    output?: {
      [name: string]: string;
    };
    owner?: string;
  };
}

// @public
export const awsEnvironmentProviderEntityV1Validator: KindValidator;

// @public (undocumented)
export type AWSEnvironmentProviderRecord = {
  id: string;
  name: string;
  prefix: string;
  providerType: string;
  description: string;
  accountNumber: string;
  region: string;
};

// @public (undocumented)
export type AWSProviderParams = {
  awsAccount: string;
  awsRegion: string;
  assumedRoleArn: string;
  environmentName: string;
  envRequiresManualApproval: boolean;
  prefix: string;
  providerName: string;
  parameters: {
    [key: string]: string;
  };
};

// @public (undocumented)
export interface AWSResource {
  // (undocumented)
  resourceArn: string;
  // (undocumented)
  resourceName: string;
  // (undocumented)
  resourceTypeId: string;
  // (undocumented)
  resourceTypeName: string;
}

// @public (undocumented)
export type AWSResourceDeploymentEnvironment = AWSDeploymentEnvironment & {
  resource: {
    arn: string;
    resourceName: string;
    resourceType: string;
    resourceGroupArn: string;
    cloudFormationStackName: string;
  };
};

// @public (undocumented)
export type AWSServerlessAppDeploymentEnvironment = AWSDeploymentEnvironment & {
  app: {
    appStack: CloudFormationStack;
    s3BucketName?: string;
    resourceGroupArn: string;
    logGroupNames: string[];
  };
};

// @public (undocumented)
export interface AWSServiceResources {
  // (undocumented)
  [k: string]: Array<AWSResource>;
}

// @public
export type BackendParams = {
  awsAccount: string;
  awsRegion: string;
  prefix: string;
  providerName: string;
  appName: string;
};

// @public (undocumented)
export interface BindResourceParams {
  // (undocumented)
  appName: string;
  // (undocumented)
  envName: string;
  // (undocumented)
  policies: ResourcePolicy[];
  // (undocumented)
  providerName: string;
  // (undocumented)
  resourceEntityRef: string;
  // (undocumented)
  resourceName: string;
}

// @public
export type CloudFormationStack = {
  stackDeployStatus: DeployStackStatus;
  stackName: string;
  creationTime?: string;
  lastUpdatedTime?: string;
};

// @public (undocumented)
export enum ComponentStateType {
  // (undocumented)
  CLOUDFORMATION = 'cloudformation',
  // (undocumented)
  TERRAFORM_AWS = 'terraform-aws',
  // (undocumented)
  TERRAFORM_CLOUD = 'terraform-cloud',
}

// @public (undocumented)
export type DeployStackStatus = StackStatus | ExtraStackDeployStatus;

// @public (undocumented)
export enum ExtraStackDeployStatus {
  // (undocumented)
  STAGED = 'STAGED',
  // (undocumented)
  UNSTAGED = 'UNSTAGED',
}

// @public (undocumented)
export type GenericAWSEnvironment =
  | AWSDeploymentEnvironment
  | AWSECSAppDeploymentEnvironment
  | AWSEKSAppDeploymentEnvironment
  | AWSServerlessAppDeploymentEnvironment
  | AWSResourceDeploymentEnvironment;

// @public (undocumented)
export const getGitCredentailsSecret: (repoInfo: IRepositoryInfo) => string;

// @public (undocumented)
export const getRepoInfo: (entity: Entity) => IRepositoryInfo;

// @public (undocumented)
export const getRepoUrl: (repoInfo: IRepositoryInfo) => string;

// @public (undocumented)
export enum GitProviders {
  // (undocumented)
  GITHUB = 'github',
  // (undocumented)
  GITLAB = 'gitlab',
  // (undocumented)
  UNSET = 'unset',
}

// @public (undocumented)
export enum GitVisibility {
  // (undocumented)
  PRIVATE = 'private',
  // (undocumented)
  PUBIC = 'public',
}

// @public (undocumented)
export interface ICommitAction {
  // (undocumented)
  action: string;
  // (undocumented)
  content: string;
  // (undocumented)
  file_path: string;
}

// @public (undocumented)
export interface ICommitChange {
  // (undocumented)
  actions: ICommitAction[];
  // (undocumented)
  branch: string;
  // (undocumented)
  commitMessage: string;
}

// @public (undocumented)
export interface IGitAPIResult {
  // (undocumented)
  httpResponse: number;
  // (undocumented)
  isSuccess: boolean;
  // (undocumented)
  message: string;
  // (undocumented)
  value: any;
}

// @public (undocumented)
export interface IRepositoryInfo {
  // (undocumented)
  description?: string;
  // (undocumented)
  gitHost: string;
  // (undocumented)
  gitJobID?: string;
  // (undocumented)
  gitOrganization?: string;
  // (undocumented)
  gitProjectGroup?: string;
  // (undocumented)
  gitProvider: GitProviders;
  // (undocumented)
  gitRepoName: string;
  // (undocumented)
  isPrivate: boolean;
  // (undocumented)
  projectID?: string;
  // (undocumented)
  rawIdentifier?: string;
  // (undocumented)
  visibility?: GitVisibility;
}

// @public (undocumented)
export function isAWSECSAppDeploymentEnvironment(
  variable: any,
): variable is AWSECSAppDeploymentEnvironment;

// @public (undocumented)
export function isAWSEKSAppDeploymentEnvironment(
  variable: any,
): variable is AWSEKSAppDeploymentEnvironment;

// @public (undocumented)
export function isAWSServerlessAppDeploymentEnvironment(
  variable: any,
): variable is AWSServerlessAppDeploymentEnvironment;

// @public (undocumented)
export interface ISCMBackendAPI {
  // (undocumented)
  commitContent: (
    change: ICommitChange,
    repo: IRepositoryInfo,
    accessToken: string,
  ) => Promise<IGitAPIResult>;
  // (undocumented)
  createRepository: (
    repo: IRepositoryInfo,
    accessToken: string,
  ) => Promise<IGitAPIResult>;
  // (undocumented)
  deleteRepository: (
    repo: IRepositoryInfo,
    accessToken: string,
  ) => Promise<IGitAPIResult>;
  // (undocumented)
  getFileContent: (
    filePath: string,
    repo: IRepositoryInfo,
    accessToken: string,
  ) => Promise<IGitAPIResult>;
}

// @public (undocumented)
export interface KeyValue {
  // (undocumented)
  id: string;
  // (undocumented)
  key: string;
  // (undocumented)
  value: string;
}

// @public (undocumented)
export interface KeyValueDouble {
  // (undocumented)
  id: string;
  // (undocumented)
  key: string;
  // (undocumented)
  key2: string;
  // (undocumented)
  value: string;
  // (undocumented)
  value2: string;
}

// @public (undocumented)
export const opaPermissions: BasicPermission[];

// @public (undocumented)
export const readOpaAppAuditPermission: BasicPermission;

// @public (undocumented)
export interface ResourceBinding {
  // (undocumented)
  associatedResources?: AssociatedResources[];
  // (undocumented)
  entityRef?: string;
  // (undocumented)
  id: string;
  // (undocumented)
  provider: string;
  // (undocumented)
  resourceArn: string;
  // (undocumented)
  resourceName: string;
  // (undocumented)
  resourceType: string;
}

// @public (undocumented)
export interface ResourcePolicy {
  // (undocumented)
  policyContent: string;
  // (undocumented)
  policyFileName: string;
  // (undocumented)
  policyResource: string;
}
```
