## API Report File for "@alithya-oss/plugin-rag-ai-backend-retrieval-augmenter"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
import { AugmentationIndexer } from '@alithya-oss/plugin-rag-ai-node';
import { AugmentationPostProcessor } from '@alithya-oss/plugin-rag-ai-node';
import { AugmentationRetriever } from '@alithya-oss/plugin-rag-ai-node';
import { AuthService } from '@backstage/backend-plugin-api';
import { CatalogApi } from '@backstage/catalog-client';
import { DiscoveryService } from '@backstage/backend-plugin-api';
import { EmbeddingDoc } from '@alithya-oss/plugin-rag-ai-node';
import { Embeddings } from '@langchain/core/embeddings';
import { EmbeddingsSource } from '@alithya-oss/plugin-rag-ai-node';
import { Entity } from '@backstage/catalog-model';
import { EntityFilterShape } from '@alithya-oss/plugin-rag-ai-node';
import { LoggerService } from '@backstage/backend-plugin-api';
import { RecursiveCharacterTextSplitter } from 'langchain/text_splitter';
import { RetrievalPipeline } from '@alithya-oss/plugin-rag-ai-node';
import { RetrievalRouter } from '@alithya-oss/plugin-rag-ai-node';
import { RoadieVectorStore } from '@alithya-oss/plugin-rag-ai-node';

// @public (undocumented)
export type AugmentationOptions = {
  chunkSize?: number;
  chunkOverlap?: number;
  concurrencyLimit?: number;
};

// @public (undocumented)
export class CombiningPostProcessor implements AugmentationPostProcessor {
  // (undocumented)
  process(
    _query: string,
    _source: EmbeddingsSource,
    embeddingDocs: Map<string, EmbeddingDoc[]>,
  ): Promise<EmbeddingDoc[]>;
}

// @public (undocumented)
export const createDefaultRetrievalPipeline: ({
  vectorStore,
  discovery,
  logger,
  auth,
}: DefaultRetrievalPipelineOptions) => DefaultRetrievalPipeline;

// @public (undocumented)
export class DefaultRetrievalPipeline implements RetrievalPipeline {
  constructor({
    routers,
    retrievers,
    postProcessors,
  }: {
    routers?: RetrievalRouter[];
    retrievers?: AugmentationRetriever[];
    postProcessors?: AugmentationPostProcessor[];
  });
  // (undocumented)
  retrieveAugmentationContext(
    query: string,
    source: EmbeddingsSource,
    filter?: EntityFilterShape,
  ): Promise<EmbeddingDoc[]>;
}

// @public
export type DefaultRetrievalPipelineOptions = {
  vectorStore: RoadieVectorStore;
  logger: LoggerService;
  discovery: DiscoveryService;
  auth: AuthService;
};

// @public (undocumented)
export class DefaultVectorAugmentationIndexer implements AugmentationIndexer {
  protected constructor({
    vectorStore,
    catalogApi,
    logger,
    auth,
    embeddings,
    discovery,
    augmentationOptions,
  }: {
    vectorStore: RoadieVectorStore;
    catalogApi: CatalogApi;
    logger: LoggerService;
    auth: AuthService;
    embeddings: Embeddings;
    discovery: DiscoveryService;
    augmentationOptions?: AugmentationOptions;
  });
  // (undocumented)
  protected constructCatalogEmbeddingDocuments(
    entities: Entity[],
    source: EmbeddingsSource,
  ): Promise<EmbeddingDoc[]>;
  // (undocumented)
  protected constructTechDocsEmbeddingDocuments(
    documents: TechDocsDocument[],
    source: EmbeddingsSource,
  ): Promise<EmbeddingDoc[]>;
  // (undocumented)
  createEmbeddings(
    source: EmbeddingsSource,
    filter: EntityFilterShape,
  ): Promise<number>;
  // (undocumented)
  deleteEmbeddings(
    source: EmbeddingsSource,
    filter: EntityFilterShape,
  ): Promise<void>;
  // (undocumented)
  protected getDocuments(
    source: EmbeddingsSource,
    filter?: EntityFilterShape,
  ): Promise<EmbeddingDoc[]>;
  protected getSplitter(): RecursiveCharacterTextSplitter;
  // (undocumented)
  get vectorStore(): RoadieVectorStore;
}

// @public (undocumented)
export interface RoadieEmbeddingsConfig {
  // (undocumented)
  augmentationOptions?: AugmentationOptions;
  // (undocumented)
  auth: AuthService;
  // (undocumented)
  catalogApi: CatalogApi;
  // (undocumented)
  discovery: DiscoveryService;
  // (undocumented)
  logger: LoggerService;
  // (undocumented)
  vectorStore: RoadieVectorStore;
}

// @public (undocumented)
export class SearchClient {
  constructor(options: {
    discoveryApi: DiscoveryService;
    logger: LoggerService;
    auth: AuthService;
  });
  // (undocumented)
  query(query: SearchClientQuery): Promise<EmbeddingDoc[]>;
}

// @public (undocumented)
export type SearchClientQuery = {
  term: string;
  source: EmbeddingsSource;
};

// @public (undocumented)
export class SearchRetriever implements AugmentationRetriever {
  constructor({
    discovery,
    logger,
    searchClient,
    auth,
  }: {
    discovery: DiscoveryService;
    logger: LoggerService;
    searchClient?: SearchClient;
    auth: AuthService;
  });
  // (undocumented)
  get id(): string;
  // (undocumented)
  retrieve(query: string, source: EmbeddingsSource): Promise<EmbeddingDoc[]>;
}

// @public (undocumented)
export class SourceBasedRetrievalRouter implements RetrievalRouter {
  constructor({
    logger,
    retrievers,
  }: {
    logger: LoggerService;
    retrievers: Map<EmbeddingsSource, AugmentationRetriever[]>;
  });
  // (undocumented)
  determineRetriever(
    _query: string,
    source: EmbeddingsSource,
  ): Promise<AugmentationRetriever[]>;
}

// @public (undocumented)
export type TechDocsDocument = {
  text: string;
  entity: Entity;
  title: string;
  location: string;
};

// @public (undocumented)
export class VectorEmbeddingsRetriever implements AugmentationRetriever {
  constructor({
    vectorStore,
    logger,
  }: {
    vectorStore: RoadieVectorStore;
    logger: LoggerService;
  });
  // (undocumented)
  get id(): string;
  // (undocumented)
  retrieve(
    query: string,
    source: EmbeddingsSource,
    _filter?: EntityFilterShape,
  ): Promise<EmbeddingDoc[]>;
}

// (No @packageDocumentation comment for this package)
```
